P8105\_hw2\_gl2677
================
Gaotong LIU
9/26/2019

## Problem 0

#### Read and clean the Mr. Trash Wheel sheet

``` r
mr_trash_wheel = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
             sheet = "Mr. Trash Wheel",
             range = "A2:N338") %>% 
  janitor::clean_names() %>%
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls, digits = 0),
         sports_balls = as.integer(sports_balls)) 
```

#### Read and clean precipitation data for 2017 and 2018

``` r
prec_2017 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
             sheet = "2017 Precipitation",
             range = "A2:B14") %>% 
  janitor::clean_names() %>%
  mutate(year = "2017",
         month = month.name) %>% 
  drop_na() 

prec_2018 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
             sheet = "2018 Precipitation",
             range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  mutate(year = "2018",
         month = month.name) %>% 
  drop_na() 

#Join 2017 and 2018 percipitation
prec_2017_2018 = bind_rows(prec_2017 , prec_2018) 
```

#### Interpretation

There are 285 observations and 14 variables in `mr_trash_wheel` dataset.
The key variables are weight\_tons, volume\_cubic\_yards,
plastic\_bottles, polystyrene, cigarette\_butts, glass\_bottles,
grocery\_bags, chip\_bags, sports\_balls, homes\_powered. The median
number of sports balls in a dumpster in 2017 was 8.

There are 19 observations and 3 variables in `prec_2017_2018` dataset.
The key variables are total. The total precipitation in 2018 was 23.5.

## Problem 2

#### Read and clean pols\_month data

``` r
pols_month = 
  read_csv("./data/pols-month.csv") %>% 
  separate(mon, into = c("year","month","day"), sep = "-") %>% 
  mutate(year = as.numeric(year),
         month = as.numeric(month),
         month = month.name[month],
         president = factor(prez_gop, 
                            levels = c("gop"  = 0, "dem" = 1),
                            labels = c("gop","dem"))) %>% 
  select(-day, -prez_gop, -prez_dem)
```

#### Read and clean snp data

``` r
snp = 
  read_csv("./data/snp.csv") %>% 
  separate(date, into = c("month","day","year"), sep = "/") %>% 
  mutate(year = as.numeric(year),
         month = as.numeric(month)) %>% 
    arrange(year,month) %>% 
  mutate(month = month.name[month]) %>% 
  select(year,month,close)
```

#### Read and clean unemployment data

``` r
unemployment = 
  read_csv("./data/unemployment.csv") %>% 
  pivot_longer(Jan:Dec,
               names_to = "month",
               values_to = "percentage") %>% 
  rename(year = Year) %>% 
  mutate(month = match(month, month.abb),
         month = month.name[month])

pols_snp = left_join(pols_month, snp, by = c("year","month")) 
pols_snp_unemp = left_join(pols_snp, unemployment, by = c("year","month"))
```

#### Interpretation

There are 822 observations and 9 variables in `pols_month` dataset. This
dataset shows the president’s political party and the number of national
politicians who are democratic or republican at any given time. The key
variables are gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem. The
range of year is from 1947 to 2015.

There are 787 observations and 3 variables in `snp` dataset. This
dataset is related to Standard & Poor’s stock market index (S\&P) at any
given time. The key variables are close. The range of year is from 1950
to 2015.

There are 816 observations and 3 variables in `unemployment` dataset.
This dataset shows unemployment percentage at any given time. The key
variables are percentage. The range of year is from 1948 to 2015.

There are 822 observations and 9 variables in `pols_snp_unemp`
**resulting dataset**. The key variables are gov\_gop, sen\_gop,
rep\_gop, gov\_dem, sen\_dem, rep\_dem, president, close, percentage.
The range of year is from 1947 to 2015.

## Problem 3

#### Read and clean baby\_names data

``` r
baby_names = 
  read_csv("./data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(gender = str_to_lower(gender),
         ethnicity = str_to_lower(ethnicity),
         childs_first_name = str_to_lower(childs_first_name)) %>% 
  distinct() 
```

#### Rank of olivia over time

``` r
folivia = baby_names %>% 
  filter(childs_first_name == "olivia" & gender == "female") %>% 
  select(-childs_first_name, -gender, -count) %>% 
  pivot_wider(names_from = "year_of_birth",
              values_from = "rank") %>% 
  knitr::kable()
folivia
```

| ethnicity                  | 2016 | 2015 | 2014 | 2013 | 2012 | 2011 |
| :------------------------- | ---: | ---: | ---: | ---: | ---: | ---: |
| asian and pacific islander |    1 |    1 |    1 |    3 |   NA |    4 |
| black non hispanic         |    8 |    4 |    8 |    6 |   NA |   10 |
| hispanic                   |   13 |   16 |   16 |   22 |   22 |   18 |
| white non hispanic         |    1 |    1 |    1 |    1 |   NA |    2 |
| asian and paci             |   NA |   NA |   NA |   NA |    3 |   NA |
| black non hisp             |   NA |   NA |   NA |   NA |    8 |   NA |
| white non hisp             |   NA |   NA |   NA |   NA |    4 |   NA |

#### Name of rank first over time

``` r
mrank = baby_names %>% 
  filter(rank == 1 & gender == "male") %>% 
  select(-rank, -gender, -count) %>% 
  mutate(childs_first_name = str_to_title(childs_first_name)) %>% 
  pivot_wider(names_from = "year_of_birth",
              values_from = "childs_first_name") %>% 
  knitr::kable()
mrank
```

| ethnicity                  | 2016   | 2015   | 2014   | 2013   | 2012   | 2011    |
| :------------------------- | :----- | :----- | :----- | :----- | :----- | :------ |
| asian and pacific islander | Ethan  | Jayden | Jayden | Jayden | NA     | Ethan   |
| black non hispanic         | Noah   | Noah   | Ethan  | Ethan  | NA     | Jayden  |
| hispanic                   | Liam   | Liam   | Liam   | Jayden | Jayden | Jayden  |
| white non hispanic         | Joseph | David  | Joseph | David  | NA     | Michael |
| asian and paci             | NA     | NA     | NA     | NA     | Ryan   | NA      |
| black non hisp             | NA     | NA     | NA     | NA     | Jayden | NA      |
| white non hisp             | NA     | NA     | NA     | NA     | Joseph | NA      |
